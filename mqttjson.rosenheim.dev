<VirtualHost *:80>

        ServerAdmin philipp@freilinger.org
        ServerName mqttjson.rosenheim.dev
        ServerAlias www.mqttjson.rosenheim.dev
        Protocols h2 http/1.1
        Redirect permanent / https://mqttjson.rosenheim.dev/

</VirtualHost>

<VirtualHost *:443>

        ServerAdmin philipp@freilinger.org
        ServerName mqttjson.rosenheim.dev
        ServerAlias www.mqttjson.rosenheim.dev
        Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains;"

        SSLEngine on
        SSLCertificateFile      /etc/letsencrypt/live/rosenheim.dev/fullchain.pem
        SSLCertificateKeyFile   /etc/letsencrypt/live/rosenheim.dev/privkey.pem

        SSLProxyEngine on
        SSLProxyVerify none
        SSLProxyCheckPeerCN off
        SSLProxyCheckPeerName off
        SSLProxyCheckPeerExpire off
        ProxyRequests Off
        ProxyPreserveHost On
        ProxyPass / http://127.0.0.1:5055/
        ProxyPassReverse / http://127.0.0.1:5055/
        RequestHeader set X-Forwarded-Proto "https"
        RequestHeader set X-Forwarded-Port "443"
        Protocols h2 http/1.1
        ProxyPreserveHost On

</VirtualHost>